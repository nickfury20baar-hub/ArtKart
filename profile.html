<!-- profile.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ArtKart — Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WM217K82H4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WM217K82H4');
</script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
    body { background:#f5f6fa; min-height:100vh; padding-bottom:90px; color:#333; }

    header {
      background:#fff; padding:14px 16px; display:flex; align-items:center; gap:12px;
      box-shadow:0 2px 10px rgba(0,0,0,0.06); position:sticky; top:0; z-index:100;
    }
    .logo { width: 60px; height:40px; border-radius:10px;  background:linear-gradient(135deg,#6c63ff,#9f9cff);}
    .ArtKart-img {width: 60px; height: 50px; border-radius: 5px;}
    header h1 { font-size:21px; font-weight:600; color:#2d2d2d; }

    .profile-container {
      max-width:420px; margin:24px auto; padding:28px 20px;
      background:#fff; border-radius:20px; box-shadow:0 8px 24px rgba(0,0,0,0.08);
      text-align:center;
    }

    .profile-pic-wrapper { position:relative; display:inline-block; margin-bottom:20px; }
    #userPhoto {
      width:110px; height:110px; border-radius:50%; object-fit:cover;
      border:4px solid #6c63ff; background:#e0e0e0;
    }
    .edit-pic-btn {
      position:absolute; bottom:4px; right:4px; background:#6c63ff; color:white;
      border-radius:50%; width:32px; height:32px; display:flex; align-items:center;
      justify-content:center; border:3px solid #fff; cursor:pointer;
      box-shadow:0 2px 8px rgba(0,0,0,0.15);
    }

    #userName { font-size:22px; font-weight:600; color:#222; margin-bottom:28px; }

    .stats-grid {
      display:grid; grid-template-columns:repeat(2,1fr); gap:14px; margin:0 0 32px;
    }
    .stat-card {
      background:#f0f1ff; border-radius:14px; padding:18px 12px;
      cursor:pointer; transition:transform 0.15s, box-shadow 0.15s;
    }
    .stat-card:hover, .stat-card:active {
      transform:translateY(-3px); box-shadow:0 6px 16px rgba(108,99,255,0.2);
    }
    .stat-icon { font-size:32px; color:#6c63ff; margin-bottom:8px; }
    .stat-number { font-size:20px; font-weight:700; color:#222; }
    .stat-label { font-size:13px; color:#666; }

    .btn-stack { margin-top:20px; }
    .btn {
      width:100%; padding:14px; border-radius:12px; font-size:15px;
      font-weight:500; cursor:pointer; transition:all 0.2s; border:none;
    }
    .btn-danger {
      background:#fff; color:#ff4757; border:1.5px solid #ff4757;
    }
    .btn-danger:hover { background:#ff4757; color:white; }

    .bottom-nav {
      position:fixed; bottom:0; left:0; width:100%; height:68px; background:#fff;
      display:flex; justify-content:space-around; align-items:center;
      box-shadow:0 -3px 12px rgba(0,0,0,0.09); z-index:100;
    }
    .nav-item {
      flex:1; text-align:center; font-size:11px; color:#666; cursor:pointer;
      padding:8px 0;
    }
    .nav-item.active { color:#6c63ff; font-weight:600; }
    .nav-item .material-symbols-outlined { font-size:26px; margin-bottom:4px; display:block; }
    .nav-item.active .material-symbols-outlined { color:#6c63ff; }
  </style>
</head>
<body>

  <header>
    <div class="logo"><img class="ArtKart-img" src="icons/ArtKart.png" alt="Logo"></div>
    <div>
    <h1>ArtKart</h1>
    </div>
  </header>

  <div class="profile-container">
    <div class="profile-pic-wrapper">
      <img id="userPhoto" src="https://via.placeholder.com/110" alt="Profile">
      <label for="fileInput" class="edit-pic-btn">
        <span class="material-symbols-outlined" style="font-size:20px;">edit</span>
      </label>
      <input type="file" id="fileInput" hidden accept="image/*">
    </div>

    <div id="userName">Loading...</div>

    <div class="stats-grid">
      <div class="stat-card" id="likedCard">
        <span class="material-symbols-outlined stat-icon">favorite</span>
        <div class="stat-number" id="likedCount">0</div>
        <div class="stat-label">Liked Items</div>
      </div>

      <div class="stat-card" id="savedCard">
        <span class="material-symbols-outlined stat-icon">bookmark</span>
        <div class="stat-number" id="savedCount">0</div>
        <div class="stat-label">Saved Items</div>
      </div>

      <div class="stat-card" id="ordersCard">
        <span class="material-symbols-outlined stat-icon">shopping_bag</span>
        <div class="stat-number" id="ordersCount">0</div>
        <div class="stat-label">Orders</div>
      </div>

      <div class="stat-card" id="sellerCard">
        <span class="material-symbols-outlined stat-icon">palette</span>
        <div class="stat-number">Seller</div>
        <div class="stat-label">Account</div>
      </div>
    </div>

    <div class="btn-stack">
      <button class="btn btn-danger" id="logoutBtn">Logout</button>
    </div>
  </div>

  <nav class="bottom-nav">
    <div class="nav-item" data-page="home">
      <span class="material-symbols-outlined">home</span>Home
    </div>
    <div class="nav-item" data-page="explore">
      <span class="material-symbols-outlined">explore</span>Explore
    </div>
    <div class="nav-item active" data-page="profile">
      <span class="material-symbols-outlined">person</span>Profile
    </div>
  </nav>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCZ-QeZrs6qJlDk4ZMs9LP2iQ4wjJ2vcF8",
      authDomain: "artkart-69692.firebaseapp.com",
      projectId: "artkart-69692",
      storageBucket: "artkart-69692.appspot.com",
      messagingSenderId: "1067935304156",
      appId: "1:1067935304156:web:d8c50769ecb9797f8d6719"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    const userNameEl = document.getElementById("userName");
    const userPhoto = document.getElementById("userPhoto");
    const likedCountEl = document.getElementById("likedCount");
    const savedCountEl = document.getElementById("savedCount");
    const ordersCountEl = document.getElementById("ordersCount");

    auth.onAuthStateChanged(async user => {
      if (!user) return location.href = "login.html";

      userNameEl.textContent = user.displayName || "User";
      if (user.photoURL) userPhoto.src = user.photoURL;
document.getElementById("fileInput").onchange = async e => {
  const file = e.target.files[0];
  if (!file) return;
  // Upload to Cloudinary or Firebase Storage...
  // Then update users/{uid}/photoURL
};
      // Likes
      const likesSnap = await db.collection("likes").where("userId","==",user.uid).get();
      likedCountEl.textContent = likesSnap.size;

      // Saves
      const savesSnap = await db.collection("saves").where("userId","==",user.uid).get();
      savedCountEl.textContent = savesSnap.size;

      // Orders (example collection — adjust name/path as per your DB)
      const ordersSnap = await db.collection("orders").where("buyerId","==",user.uid).get();
      ordersCountEl.textContent = ordersSnap.size;
    });

    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        const page = item.getAttribute('data-page');
        if (page === 'home')       location.href = 'home.html';
        if (page === 'explore')    location.href = 'explore.html';
        // profile = current
      });
    });

    // Stat cards clicks
    document.getElementById("likedCard").onclick = () => location.href = "liked.html";
    document.getElementById("savedCard").onclick = () => location.href = "saved.html";
    document.getElementById("ordersCard").onclick = () => location.href = "orders.html";
    document.getElementById("sellerCard").onclick = async () => {
      const user = auth.currentUser;
      if (user) location.href = `seller-profile.html?uid=${user.uid}`;
    };

    // Photo edit
    document.getElementById("fileInput").onchange = async e => {
      const file = e.target.files[0];
      if (!file) return;
      const ref = storage.ref("profiles/" + auth.currentUser.uid);
      await ref.put(file);
      const url = await ref.getDownloadURL();
      await auth.currentUser.updateProfile({ photoURL: url });
      userPhoto.src = url;
    };
    

      
    // Logout
    document.getElementById("logoutBtn").onclick = () => {
      if (confirm("Logout?")) auth.signOut().then(() => location.href = "login.html");
    };
  </script>
</body>
</html>